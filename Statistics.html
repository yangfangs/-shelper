<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Count</title>
    <style></style>
</head>
<body>
    <div style="text-align:center;position:absolute;left:20%;top:190%">
      <h5>Contactï¼šhongen_xu@zzu.edu.cn</h5>
        <span>Website Traffic Statistics <span id="umami-site-pv"></span> </span>
    </div>
    <script>
        const website_id = '91f7ca78-73e9-4861-9187-f5c19589b453';
        const request_url = 'http://nscc.zzu.edu.cn/shelperAPI' + '/websites/' + website_id + '/stats';
        const start_time = new Date('2024-04-12T09:33:03.138Z').getTime();
        const end_time = new Date().getTime();
        const token = '7KeXv6KIK+QwF8bm19YCvYIiSiY28WO9gdbqjjWSzw0N9c/RAO4xOiYhCfygRYN25hy3Dfgbf+0aDrB2BgHS8vVBG9N9O2rB8HiSrsMFX+gpgt5Ofgv1Z3voOnS9/DtO3YiafrAiIzBQSbOpniOZRvAaYGMUeW7TvlU2ETRF8PzPywrCf93xugauxKBVD2MbvE3z5LGqioYs6I/kA4ZIZUqpTiBQN7whZ+btBVz+WIxI83ZdkuzG8FOXdh9zxmS4PwbW5BRvAtN+FkLZKlBr5H6warqApWKR+ulwZKYL+Acac1hqczogL/sjanCQ02fn7STreeCtttFcB4rdEP0bsTef597+cjlhpg==';
        if (!website_id) {
            throw new Error("website_id is empty");
        }
        if (!request_url) {
            throw new Error("request_url is empty");
        }
        if (!start_time) {
            throw new Error("start_time is empty");
        }
        if (!token) {
            throw new Error("token is empty");
        }
        const params = new URLSearchParams({
            startAt: start_time,
            endAt: end_time,
        });
        const request_header = {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + token,
            },
        };
        async function allStats() {
            try {
                const response = await fetch(`${request_url}?${params}`, request_header);
                const data = await response.json();
                const pageViews = data.pageviews.value;
                let ele1 = document.querySelector("#umami-site-pv")
                if (ele1) {
                    ele1.textContent = pageViews;
                }
                let ele2 = document.querySelector("#umami-site-uv")
                if (ele2) {
                    ele2.textContent = uniqueVisitors;
                }
                console.log(uniqueVisitors, pageViews);
                console.log(data);
            } catch (error) {
                console.error(error);
                return "-1";
            }
        }
        allStats();
    </script>
</body>
</html>